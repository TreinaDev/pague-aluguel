<% if @base_fee.errors.any? %>
  <div class="alert alert-danger" role="alert">
    <p><%= I18n.t('errors.messages.verify_error') %></p>
    <ul>
      <% @base_fee.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<div class="mt-3 card rounded-0 border-0">
  <span class="fs-5 mx-auto mt-3"><%= I18n.t('views.new.create_fee', condo: @condo.name).upcase %></span>
  <%= form_with model: [@condo, @base_fee], local: true do |f| %>
    <%= hidden_field_tag :condo, @condo.id %>

    <div class="form-floating mb-2 w-50 mx-auto mt-4">
      <%= f.text_field :name, class: "form-control" %>
      <%= f.label :name %>
    </div>

    <div class="form-floating mb-2 w-50 mx-auto">
      <%= f.text_field :description, class: "form-control" %>
      <%= f.label :description %>
    </div>

    <div class="form-floating mb-2 w-50 mx-auto">
      <%= f.select :recurrence, options_for_select(BaseFee.recurrences.map { |key, _| [I18n.t("base_fee.#{key}"), key] }, @base_fee.recurrence), {}, class: "form-control" %>
      <%= f.label :recurrence %>
    </div>

    <%= f.fields_for :values do |values_form| %>
      <div class="form-floating mb-2 w-50 mx-auto">
        <%= values_form.hidden_field :unit_type_id, value: values_form.object.unit_type.id %>
        <%= values_form.number_field :price_cents, class: "form-control" %>
        <%= values_form.label :price_cents, I18n.t('activerecord.values.values_price', unit_type: values_form.object.unit_type.description) %>
      </div>
    <% end %>

    <div class="form-floating mb-2 w-50 mx-auto">
      <%= f.date_field :charge_day, class: "form-control" %>
      <%= f.label :charge_day %>
    </div>

    <div class="form-check form-switch mb-2 w-50 mx-auto">
      <%= f.label :fixed, class: "form-check-label" %>
      <%= f.check_box :fixed, class: "form-check-input" %>
    </div>

    <div class="form-floating mb-2 w-50 mx-auto">
      <%= f.number_field :late_payment, class: "form-control" %>
      <%= f.label :late_payment %>
    </div>

    <div class="form-floating mb-2 w-50 mx-auto">
      <%= f.number_field :late_fee, class: "form-control" %>
      <%= f.label :late_fee %>
    </div>

    <div class="d-flex justify-content-center">
      <%= f.submit I18n.t('helpers.submit.submit'), class: 'btn btn-primary mb-5' %>
    </div>
  <% end %>
</div>

<hr>

<%= link_to I18n.t('helpers.buttons.back'), condo_path(@condo), class: "btn btn-secondary" %>
