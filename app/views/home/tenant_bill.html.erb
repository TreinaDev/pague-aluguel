<%= turbo_frame_tag "modal" do %>
  <div class="dean-modal modal-md">
    <%= link_to "", :back, class: "btn btn-close btn-sm", id: 'back' %>
    <span class="fs-8 text-center d-block"><%= I18n.t('activerecord.models.bill.one') %></span>
    <span class="fs-3 text-center d-block">Unidade <%= @tenant.residence["number"] %></span>
    <span class="fs-8 text-center d-block text-muted"><%= @tenant.residence["condo_name"] %></span>
    <hr>

    <div class="d-flex justify-content-center align-items-center">
      <%= image_tag "dollar-icon", size: "20" %>
      <span class="ms-1 me-2 fs-7 text-muted">
        <%=  I18n.t('activerecord.attributes.bill.total_value') %>
      </span>

      <%= @bill.total_value.format %>
    </div>

    <hr>
    <div class="px-5">
      <div class=" d-flex justify-content-between">
        <span class="text-muted text-lowercase fs-8"><%= I18n.t('activerecord.models.base_fee.one') %>:</span>
        <span><%= BaseFeeCalculator.total_value(@tenant.residence["unit_type_id"]) %></span>
      </div>
      <div class=" d-flex justify-content-between">
        <span class="text-muted text-lowercase fs-8"><%= I18n.t('activerecord.models.shared_fee.one') %>:</span>
        <span class=""><%= BillCalculator.calculate_shared_fees(@tenant.residence["unit_type_id"]) %></span>
      </div>
    </div>
    <hr>

    <div class="px-5">
      <div class=" d-flex justify-content-between">
        <span class="text-muted text-lowercase fs-8"><%=  I18n.t('activerecord.attributes.bill.due_date') %>:</span>
        <span><%= I18n.l(@bill.due_date) %></span>
      </div>
      <div class=" d-flex justify-content-between">
        <span class="text-muted text-lowercase fs-8"><%=  I18n.t('activerecord.attributes.bill.issue_date') %>:</span>
        <span class=""><%= I18n.l(@bill.issue_date) %></span>
      </div>
    </div>

    <hr>
    <p class="text-center text-muted fs-7">Pagamento</p>
    <div class="d-flex justify-content-center gap-2 mb-2">
      <% if @bill.pending? %>
        <span class="badge text-bg-danger text-uppercase fs-7"><%= I18n.t("activerecord.attributes.bill.status.#{@bill.status}")  %></span>
      <% elsif @bill.awaiting? %>
        <span class="badge text-bg-warning text-uppercase fs-7"><%= I18n.t("activerecord.attributes.bill.status.#{@bill.status}")  %></span>
      <% else %>
        <span class="badge text-bg-success text-uppercase fs-7"><%= I18n.t("activerecord.attributes.bill.status.#{@bill.status}")  %></span>
      <% end %>
    </div>

    <% unless @bill.pending? %>
      <div class="text-center">
        <%= link_to url_for(@bill.receipt.file), target: "_blank", class: "btn hover-strong" do %>
          <%= image_tag "document-search-icon", size: "20" %>
          <span class="ms-1 fs-7 text-uppercase"><%= I18n.t('buttons.show.receipt') %></span>
        <% end %>
      </div>
    <% end %>

    <hr>
    <span class="fs-8 text-center d-block text-muted"><%= @tenant.name %></span>
    <span class="fs-8 text-center d-block text-muted" data-controller="document-number"><%= @tenant.document_number %></span>
  </div>
<% end %>
